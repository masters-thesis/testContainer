## Synopsis

This program is used inside a container to test the reactions of the platform it is managed by.
The test container used in the thesis tests can be found under https://hub.docker.com/r/rkurz/test-container/.
The TestExecutor that runs defined tests on the container can be found under https://github.com/robinkurz/TestExecutor.
There is also a UI for the Test Executor, found under https://github.com/robinkurz/TestSuite.

## Code Example

Start the api:
```
java -jar target/TestContainer-1.0-SNAPSHOT.jar
```

**OR**:

Start the container:
```
docker run rkurz/test-container
```

Call a service on the command line :
```
curl localhost:8080/killProcess
```

Call a service in a browser:
```
http://localhost:8080/killProcess
```

## Return Values
Every API call returns a JSON message in the following format:

{
  "id": {},
  "endpoint": {},
  "ipAddress": {},
  "message": {},
  "environmentVariables": {}
}

The id returns the UUID generated by the application. This is used to identify a container running on a platform.
The endpoint simply returns the called endpoint identifier.
The ipAddress returns the IPv4 IP Address of the node the container is running on.
The message returns a custom message per endpoint.
The environmentVariables return all environment variables of the container.
This is can offer information about the name of the container in the platform or the open ports.
It is heavily platform dependent how many environment variables are set.

## API

*Note:* All calls are GET calls.

**/healthz**: This endpoint answers either with a "healthy" or a "dead" as the message. Used as the primary method to check availability of container.
**/killProcess**: This endpoint is used to kill the java process per System.exit(0). Used to test how fast the container is brought back up.
**/killHealth**: This endpoint causes the /healthz endpoint to return the message "dead" and a 400 HTTP error response. Used to test the HTTP Endpoint monitoring of a platform.
**/suspendHealth**: This endpoint causes the /healthz endpoint to never return a response by sending it into an infinite loop. Used to test the HTTP Endpoint monitoring of a platform.
**/generateWorkload**: This endpoint causes a high CPU load. Used to test the autoscaling function of a platform, could also be used to check if the load balancer goes easy on the process under high load.
